<div class="wrap">
    <h1><?php esc_html_e('Malware Scanner', 'wsp-malware-scanner'); ?></h1>

    <!-- Scan Form -->
    <form method="post" action="options.php">
        <?php
            // Security field for saving settings
            settings_fields('wsp_malware_scanner_options_group');
            // Output settings section here
            do_settings_sections('wsp_malware_scanner');
        ?>

        <table class="form-table">
            <tr valign="top">
                <th scope="row"><?php esc_html_e('Scan Type', 'wsp-malware-scanner'); ?></th>
                <td>
                    <select name="wsp_scan_type" id="wsp_scan_type">
                        <option value="full"><?php esc_html_e('Full Scan', 'wsp-malware-scanner'); ?></option>
                        <option value="quick"><?php esc_html_e('Quick Scan', 'wsp-malware-scanner'); ?></option>
                        <option value="custom"><?php esc_html_e('Custom Scan', 'wsp-malware-scanner'); ?></option>
                    </select>
                    <p class="description">
                        <?php esc_html_e('Choose the type of scan you want to perform. Full scan scans the entire WordPress directory.', 'wsp-malware-scanner'); ?>
                    </p>
                </td>
            </tr>

            <tr valign="top" id="custom-scan-path-row" style="display: none;">
                <th scope="row"><?php esc_html_e('Custom Path', 'wsp-malware-scanner'); ?></th>
                <td>
                    <input type="text" name="wsp_custom_scan_path" id="wsp_custom_scan_path" value="<?php echo esc_attr(get_option('wsp_custom_scan_path')); ?>" />
                    <p class="description"><?php esc_html_e('Specify the path to scan if you selected a custom scan.', 'wsp-malware-scanner'); ?></p>
                </td>
            </tr>

        </table>

        <?php submit_button(esc_html__('Run Scan', 'wsp-malware-scanner')); ?>
    </form>
</div>

<script>
    // Show/Hide custom path input based on scan type
    document.getElementById('wsp_scan_type').addEventListener('change', function () {
        if (this.value === 'custom') {
            document.getElementById('custom-scan-path-row').style.display = '';
        } else {
            document.getElementById('custom-scan-path-row').style.display = 'none';
        }
    });
</script>